# 运维中心

## 概念

**这里用户可以管理 Helm 应用、日志和集群事件持久化。**

## Helm应用

### 概念

**这里给集群创建 Helm 应用。**

### 前提条件

> * 需要使用Helm应用的集群应该先在[【扩展组件】](kuo-zhan-zu-jian.md)安装**Helm组件**

### 操作步骤

#### 新建Helm应用

1. 登录 TKEStack。
2. 切换至【平台管理】控制台，选择【运维中心】-&gt;【 Helm 应用】。
3. 选择相应【集群】，单击【新建】按钮。如下图所示：

   ![&#x65B0;&#x5EFA;Helm&#x6309;&#x94AE;](../../.gitbook/assets/新建Helm按钮.png)

4. 在“新建Helm应用”页面填写Helm应用信息。如下图所示：

   ![&#x65B0;&#x5EFA;Helm&#x5E94;&#x7528;](../../.gitbook/assets/新建Helm应用.png)

   * **应用名：** 输入应用名，1～63字符，只能包含小写字母、数字及分隔符\("-"\)，且必须以小写字母开头，数字或小写字母结尾
   * **Chart\_Url：** 输入Chart 文件地址
   * **类型：** 选择应用类型
     * **公有：** 公有类型
     * **私有：** 私有类型
       * **用户名：** 私有用户名
       * **密码：** 私有密码
   * **Key-Value：** 通过新增变量替换Chart包中默认配置

5. 单击【完成】按钮。

## 日志采集

### 概念

**这里用户可以管理各个集群的日志采集**

> 前提：在【平台管理】控制台，【运维中心】-&gt;【日志组件】中**开启**需要采集日志集群的组件，当组件的状态为“运行中”时，表示可以新建日志采集规则。

![&#x6253;&#x5F00;&#x65E5;&#x5FD7;&#x91C7;&#x96C6;&#x7EC4;&#x4EF6;](../../.gitbook/assets/打开日志采集组件.png)

### 操作步骤

#### 新建日志采集规则

1. 登录 TKEStack。
2. 切换至【平台管理】控制台，选择 【运维中心】-&gt;【日志采集】。
3. 选择相应【集群】和【命名空间】，单击【新建】按钮。如下图所示：

   ![&#x65B0;&#x5EFA;&#x65E5;&#x5FD7;&#x91C7;&#x96C6;&#x6309;&#x94AE;](../../.gitbook/assets/新建日志采集按钮.png)

4. 在“新建日志采集”页面填写日志采集信息。如下图所示：

   ![&#x65B0;&#x5EFA;&#x65E5;&#x5FD7;&#x91C7;&#x96C6;](../../.gitbook/assets/新建日志采集.png)

   * **收集规则名称：** 输入规则名，1～63字符，只能包含小写字母、数字及分隔符\("-"\)，且必须以小写字母开头，数字或小写字母结尾
   * **所属集群：** 选择所属集群
   * **类型：** 选择采集类型
     * **容器标准输出：** 容器Stdout信息采集
       * **日志源：** 可以选择所有容器或者某个namespace下的所有容器/工作负载
         * **所有容器：** 所有容器
         * **指定容器：** 某个Namespace下的所有容器或者工作负载
     * **容器文件路径：** 容器内文件内容采集
       * **日志源：** 可以采集具体容器内的某个文件路径下的文件内容
         * **工作负载选项：** 选择某个namespace下的某种工作负载类型下的某个工作负载
         * **配置采集路径：** 选择某个容器下的某个文件路径
     * **节点文件路径：**  收集节点上某个路径下的文件内容
       * **日志源：** 
         * **收集路径：** 节点上日志收集路径
         * **metadata：** key：value格式，收集的日志会带上metadata信息上报给消费端
   * **消费端：** 选择日志消费端
     * **Kafka：** 
       * **访问地址：** kafka ip和端口
       * **主题（Topic）：** kafka topic名
     * **Elasticsearch：** 
       * **Elasticsearch地址：** ES 地址，如：[http://190.0.0.1:200](http://190.0.0.1:200)
       * **索引：** ES索引，最长60个字符，只能包含小写字母、数字及分隔符\("-"、"\_"、"+"\)，且必须以小写字母开头

5. 单击【完成】按钮。

## 事件持久化

### 概念

**这里用户可以管理各个集群的事件**

### 操作步骤

#### 设置事件持久化

1. 登录 TKEStack。
2. 切换至【平台管理】控制台，选择 【运维中心】-&gt;【事件持久化】，查看事件持久化列表。
3. 单击列表最右侧【设置】按钮。如下图所示：

   ![&#x4E8B;&#x4EF6;&#x6301;&#x4E45;&#x5316;&#x8BBE;&#x7F6E;](../../.gitbook/assets/事件持久化设置.png)

4. 在“设置事件持久化”页面填写持久化信息。如下图所示：

   ![&#x8BBE;&#x7F6E;&#x4E8B;&#x4EF6;&#x6301;&#x4E45;&#x5316;](../../.gitbook/assets/设置事件持久化.png)

   * **事件持久化存储：** 是否进行持久化存储
   * **Elasticsearch地址：** ES 地址，如：[http://190.0.0.1:200](http://190.0.0.1:200)
   * **索引：** ES索引，最长60个字符，只能包含小写字母、数字及分隔符\("-"、"\_"、"+"\)，且必须以小写字母开头

5. 单击【完成】按钮。

